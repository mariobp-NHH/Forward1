{% extends "se_course/layout.html" %}
{% block content %}
{% if current_user.email=='admin@demo.com' %}
    <section class="section_statistics" style="background-color: #f2b84b;">

        <div class="container">
            <div class="statistics_css">
                <div class="box">
                    <table class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">User</th>
                                <th scope="col">Date</th>
                                <th scope="col">Chapter</th>
                                <th scope="col">Question Number</th>
                                <th scope="col">Result</th>
                                <th scope="col">Link Exercise</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in entries %}
                                <tr>
                                    <th scope="row">{{ current_user.username }}</th>
                                    <td>{{ entry.date_exercise.strftime("%m-%d-%Y") }}</td>
                                    <td>{{ entry.title_ch }}</td>
                                    <td>{{ entry.question_num }}</td>
                                    <td>{{ entry.question_result }}</td>
                                    <td><a href="{{ url_for('se_course_se_module.se_web_ch1') }}" class="btn btn-outline-info btn-sm">Link</a></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="box">
                    <canvas id="correct_vs_incorrect"></canvas>
                </div>
            </div>
        </div>


        <div class="container">
            <div class="statistics_summary2_css">
                <div class="box">
                    <canvas id="correct_vs_incorrect_q1"></canvas>
                </div>
                <div class="box">
                    <canvas id="correct_vs_incorrect_q2"></canvas>
                </div>
                <div class="box">
                    <canvas></canvas>
                </div>
            </div>
        </div>


        
    </section>


    {% block javascript1 %}
    <script>
        Chart.scaleService.updateScaleDefaults('linear', {
                ticks: {
                    min: 0
                }
        });
        let correct_vs_incorrect_chart = new Chart(correct_vs_incorrect, {
                type: 'pie',
                data: {
                labels: ['correct', 'incorrect'],
                    datasets: [{
                        label: "Correct Vs Incorrect",
                        data: [{{correct}}, {{incorrect}}],
                        backgroundColor: ['#f2935c', '#f2d95c'],

                        borderWidth: 1,
                        hoverBorderColor: "black",
                        hoverBorderWidth: 2,
                        hoverBackgroundColor: 'rgba(154, 245, 140)',
                        pointHoverRadius: 5
                    }],
                },
                options: {
                        title: {
                            display: true,
                                text: "Chapter 1. Frame: Green economy",
                                    fontSize: 20,
                        },
                        legend: {
                            position: "right",
                                labels: {
                                fontColor: "gray"
                            },
                            display: true,
                        },

                        elements: {
                            hitRadius: 3,
                        }
                }
            })

        let correct_vs_incorrect_chart_q1 = new Chart(correct_vs_incorrect_q1, {
                type: 'pie',
                data: {
                labels: ['correct', 'incorrect'],
                    datasets: [{
                        label: "Correct Vs Incorrect",
                        data: [{{correct_q1}}, {{incorrect_q1}}],
                        backgroundColor: ['#f2935c', '#f2d95c'],

                        borderWidth: 1,
                        hoverBorderColor: "black",
                        hoverBorderWidth: 2,
                        hoverBackgroundColor: 'rgba(154, 245, 140)',
                        pointHoverRadius: 5
                    }],
                },
                options: {
                        title: {
                            display: true,
                                text: "Chapter 1. Frame: Green economy Q1",
                                    fontSize: 20,
                        },
                        legend: {
                            position: "right",
                                labels: {
                                fontColor: "gray"
                            },
                            display: true,
                        },

                        elements: {
                            hitRadius: 3,
                        }
                }
            })

            let correct_vs_incorrect_chart_q2 = new Chart(correct_vs_incorrect_q2, {
                type: 'pie',
                data: {
                labels: ['correct', 'incorrect'],
                    datasets: [{
                        label: "Correct Vs Incorrect",
                        data: [{{correct_q2}}, {{incorrect_q2}}],
                        backgroundColor: ['#f2935c', '#f2d95c'],

                        borderWidth: 1,
                        hoverBorderColor: "black",
                        hoverBorderWidth: 2,
                        hoverBackgroundColor: 'rgba(154, 245, 140)',
                        pointHoverRadius: 5
                    }],
                },
                options: {
                        title: {
                            display: true,
                                text: "Chapter 1. Frame: Green economy Q2",
                                    fontSize: 20,
                        },
                        legend: {
                            position: "right",
                                labels: {
                                fontColor: "gray"
                            },
                            display: true,
                        },

                        elements: {
                            hitRadius: 3,
                        }
                }
            })



            
    </script>
    {% endblock%}

{% else %}
    <section class="section_statistics" style="background-color: #f2b84b;">


        <div class="container">
            <div class="statistics_css">
                <div class="box">
                    <table class="table">
                        <thead class="thead-dark">
                            <tr>
                                <th scope="col">User</th>
                                <th scope="col">Date</th>
                                <th scope="col">Chapter</th>
                                <th scope="col">Question Number</th>
                                <th scope="col">Result</th>
                                <th scope="col">Link Exercise</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for entry in entries %}
                                <tr>
                                    <th scope="row">{{ current_user.username }}</th>
                                    <td>{{ entry.date_exercise.strftime("%m-%d-%Y") }}</td>
                                    <td>{{ entry.title_ch }}</td>
                                    <td>{{ entry.question_num }}</td>
                                    <td>{{ entry.question_result }}</td>
                                    <td><a href="{{ url_for('se_course_se_module.se_web_ch1') }}" class="btn btn-outline-info btn-sm">Link</a></td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div class="box">
                    <canvas id="correct_vs_incorrect"></canvas>
                </div>
            </div>
        </div>
    </section>


    {% block javascript2 %}
    <script>

        Chart.scaleService.updateScaleDefaults('linear', {
                ticks: {
                    min: 0
                }
        });


        let correct_vs_incorrect_chart = new Chart(correct_vs_incorrect, {
                type: 'pie',
                data: {
                labels: ['correct', 'incorrect'],
                    datasets: [{
                        label: "Correct Vs Incorrect",
                        data: [{{correct}}, {{incorrect}}],
                        backgroundColor: ['#f2935c', '#f2d95c'],

                        borderWidth: 1,
                        hoverBorderColor: "black",
                        hoverBorderWidth: 2,
                        hoverBackgroundColor: 'rgba(154, 245, 140)',
                        pointHoverRadius: 5
                    }],
                },
                options: {
                        title: {
                            display: true,
                                text: "Chapter 1. Frame: Green economy",
                                    fontSize: 20,
                        },
                        legend: {
                            position: "right",
                                labels: {
                                fontColor: "gray"
                            },
                            display: true,
                        },

                        elements: {
                            hitRadius: 3,
                        }
                }
            })


    </script>
    {% endblock%}
{% endif %}


{% endblock content %}
